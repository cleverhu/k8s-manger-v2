(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01dc20d0"],{f492:function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return r}));var o=t("b775");function s(e){return Object(o["a"])({url:"/pods?ns="+e,method:"get"})}function r(e,n){return Object(o["a"])({url:"/pods/containers?ns="+e+"&podName="+n,method:"get"})}},ffbb:function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticStyle:{"min-height":"500px",padding:"10px"}},[t("p",[e._v("NameSpace:"+e._s(e.ns))]),t("p",[e._v("PodName:"+e._s(e.podName))]),e._v(" 容器 "),t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.onSelectedDrug},model:{value:e.currentCName,callback:function(n){e.currentCName=n},expression:"currentCName"}},e._l(e.cNames,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1),t("div",{ref:"terminal",attrs:{id:"terminal"}})],1)},s=[],r=t("fcf3"),i=(t("abb2"),t("f492")),a={data:function(){return{rows:40,cols:100,term:null,ws:null,wsInited:!1,currentCName:"myngx",cNames:[],ns:"default",podName:"web1-988bf8-sf9d4"}},mounted:function(){var e=new r["Terminal"]({rendererType:"canvas",rows:parseInt(this.rows),cols:parseInt(this.cols),convertEol:!0,disableStdin:!1,cursorStyle:"underline",cursorBlink:!0,theme:{foreground:"#7e9192",background:"#002833",cursor:"help",lineHeight:16}});e.open(this.$refs["terminal"]),e.prompt=function(){e.writeln("\n 正在初始化终端")},e.prompt(),this.term=e},created:function(){var e=this.$route.params,n=e.ns,t=e.podName;console.log(n,t),void 0===n?this.$router.push({name:"pods"}):(this.ns=n,this.podName=t,this.initContainerNames())},methods:{onSelectedDrug:function(e){console.log(e),this.currentCName=e,this.initWS()},initContainerNames:function(){var e=this;Object(i["a"])(this.ns,this.podName).then((function(n){e.cNames=n.data,e.cNames.length>0&&(e.currentCName=e.cNames[0],e.initWS())}))},initWS:function(){var e=this;console.log(this.ws,null!=this.ws),null!=this.ws&&this.ws.close();var n=new WebSocket("ws://localhost:8080/v1/podws?ns="+this.ns+"&podName="+this.podName+"&cName="+this.currentCName);n.onopen=function(){console.log("open")},n.onmessage=function(n){e.wsInited=!0,e.term.write(n.data)},n.onclose=function(e){console.log("close")},n.onerror=function(e){console.log(e)},this.ws=n,this.term.onData((function(n){e.wsInited&&e.ws.send(n)}))}}},c=a,l=t("2877"),u=Object(l["a"])(c,o,s,!1,null,null,null);n["default"]=u.exports}}]);