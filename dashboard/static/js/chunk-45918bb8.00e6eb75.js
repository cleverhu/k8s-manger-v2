(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45918bb8"],{b0f0:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticStyle:{"min-height":"500px",padding:"10px"}},[t("p",[e._v("NameSpace:"+e._s(e.ns))]),t("p",[e._v("PodName:"+e._s(e.podName))]),e._v(" 容器 "),t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.onSelectedDrug},model:{value:e.currentCName,callback:function(n){e.currentCName=n},expression:"currentCName"}},e._l(e.cNames,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1),t("div",{ref:"terminal",attrs:{id:"terminal"}})],1)},o=[],s=t("fcf3"),a=(t("abb2"),t("b775")),i=t("f492"),c={data:function(){return{rows:40,cols:100,term:null,currentCName:"",cNames:[],ns:"",podName:""}},mounted:function(){var e=this,n=new s["Terminal"]({rendererType:"canvas",rows:parseInt(this.rows),cols:parseInt(this.cols),convertEol:!0,disableStdin:!1,cursorStyle:"underline",cursorBlink:!0,theme:{foreground:"#7e9192",background:"#002833",cursor:"help",lineHeight:16}});n.open(this.$refs["terminal"]),n.prompt=function(){n.writeln("\n 正在初始化终端")},n.prompt(),n.onData((function(n){e.wsInited})),this.term=n},methods:{onSelectedDrug:function(e){this.showLogs(this.ns,this.podName,e)},showLogs:function(e,n,t){var r=this;Object(a["a"])({url:"http://localhost:8080/v1/pods/logs?podName="+n+"&ns="+e+"&cName="+t,method:"GET",onDownloadProgress:function(e){var n=e.currentTarget.response;r.term.writeln("\n "+n)}}).catch((function(e){r.$router.push({name:"pods"})}))},initContainerNames:function(){var e=this;Object(i["a"])(this.ns,this.podName).then((function(n){e.cNames=n.data,console.log(e.cNames),e.cNames.length>0&&(e.currentCName=e.cNames[0],e.showLogs(e.ns,e.podName,e.currentCName))}))}},created:function(){var e=this.$route.params,n=e.ns,t=e.podName;void 0===n?this.$router.push({name:"pods"}):(this.ns=n,this.podName=t,this.initContainerNames())}},u=c,l=t("2877"),m=Object(l["a"])(u,r,o,!1,null,null,null);n["default"]=m.exports},f492:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return s}));var r=t("b775");function o(e){return Object(r["a"])({url:"/pods?ns="+e,method:"get"})}function s(e,n){return Object(r["a"])({url:"/pods/containers?ns="+e+"&podName="+n,method:"get"})}}}]);